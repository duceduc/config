# [10:52:1C:62:EC:48]
substitutions:
  name: security-mdf
#  ssid: !secret ssid2

<<: !include .base.yaml #.249

esphome:
  name: $name
esp32:
  board: nodemcu-32s

esp32_camera:
  name: ' '
  external_clock:
    pin: # GPIO0
      number: GPIO0
      ignore_strapping_warning: true
    frequency: 20MHz
  i2c_pins:
    sda: GPIO26
    scl: GPIO27
  data_pins: [GPIO5, GPIO18, GPIO19, GPIO21, GPIO36, GPIO39, GPIO34, GPIO35]
  vsync_pin: GPIO25
  href_pin: GPIO23
  pixel_clock_pin: GPIO22
  power_down_pin: GPIO32

# Image settings
  vertical_flip: false
  max_framerate: 1 fps
  resolution: SXGA
  jpeg_quality: 20
  contrast: 2
  saturation: 2

output:
  - platform: gpio
    pin:
      number: GPIO3
      allow_other_uses: true
    id: gpio_3
    
light:
  - platform: binary
    name: light  
    output: gpio_3

sensor:
  - platform: wifi_signal
    name: wifi signal
    update_interval: 15s
    filters:
      - sliding_window_moving_average:
          window_size: 15
          send_every: 15

  - platform: dht
    model: AM2302
    update_interval: 15s
    pin: 
      number: GPIO3
      allow_other_uses: true

    temperature:
      name: Temperature
      filters:
        - sliding_window_moving_average:
           window_size: 15
           send_every: 15
    humidity:
      name: Humidity
      filters:
        - sliding_window_moving_average:
           window_size: 15
           send_every: 15

binary_sensor:
  - platform: status
    name: status

switch:
  - platform: restart
    name: Restart
    icon: mdi:restart
